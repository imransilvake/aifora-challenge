<div class="app-work-flow">
	<!-- Bucket(s) -->
	<ng-container *ngIf="data && data['buckets'] && data['buckets'].length">
		<ng-container *ngFor="let bucket of data['buckets']; let idx = index; let last = last;"
					  [ngSwitch]="bucket.id === bucketTypeAll">
			<!-- All -->
			<ng-container *ngSwitchCase="true">
				<section class="app-all">
					<!-- Values -->
					<div class="app-values">
						<p>{{bucket.content.stock.value}} <b>{{bucket.content.stock.label}}</b></p>
						<p>{{bucket.content.planning.value}} <b>{{bucket.content.planning.label}}</b></p>
					</div>

					<!-- Percentage -->
					<div class="app-percentage">
						<p>{{ (bucket.content.planning.value/bucket.content.stock.value) * 100 }}%</p>
					</div>

					<!-- Icon -->
					<img class="app-curly-bracket"
						 [src]="'assets/svg/curly-bracket.svg'"
						 alt="curly-brackets" />
				</section>
			</ng-container>

			<!-- Bucket(s) -->
			<ng-container *ngSwitchCase="false">
				<section class="app-buckets">
					<div class="app-bucket"
						 (click)="onBucketSelect(bucket, idx)">
						<!-- Circle -->
						<div class="app-circle">
							<app-percentage-circle [percentage]="bucket.percentage"
												   [selected]="selectedIndex === idx">
							</app-percentage-circle>
						</div>

						<!-- Values -->
						<div class="app-values"
							 [class.app-active]="selectedIndex === idx">
							<h4>{{bucket.label}}</h4>
							<p *ngIf="bucket.checkboxes">{{sumTotalBucketValue(bucket.checkboxes)}}</p>
						</div>

						<!-- Icon -->
						<img *ngIf="!last"
							 class="app-forward"
							 [src]="'assets/svg/forward.svg'"
							 alt="forward" />
					</div>

					<!-- Checkboxes -->
					<div class="app-checkboxes"
						 *ngIf="bucket && bucket.checkboxes && selectedIndex === idx">
						<ng-container *ngFor="let checkbox of bucket.checkboxes; let cIdx = index;">
							<label [for]="uniqueComponentId + '-' + cIdx"
								   class="app-checkbox container">
								{{checkbox.value}} <b>{{checkbox.key}}</b>
								<input type="checkbox"
									   [id]="uniqueComponentId + '-' + cIdx"
									   [name]="checkbox.key"
									   [formControl]="form.controls['cb'].value[bucket.label][cIdx]"
									   (change)="onBucketCheckboxChange(bucket)">
								<span class="app-checkmark"></span>
							</label>
						</ng-container>
					</div>
				</section>
			</ng-container>
		</ng-container>
	</ng-container>

	<!-- Buttons(s) -->
	<ng-container *ngIf="data && data['buttons'] && data['buttons'].length">
		<section class="app-buttons">
			<ng-container *ngFor="let button of data['buttons']">
				<button type="button"
						class="app-button"
						(click)="onButtonSelect(button)"
						[disabled]="button.dependsOnBucket && button.dependsOnBucket !== selectedBucketType">
					{{button['label']}}
				</button>
			</ng-container>
		</section>
	</ng-container>
</div>